var __extends=(this&&this.__extends)||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};var ts=require("typescript");var stream=require("stream");var fs=require("fs");var chalk=require("chalk");var path=require("path");var chokidar=require("chokidar");var File=require("vinyl");var _=require("lodash");var fileGlob=require("glob");var a={none:0,error:1,warn:2,trace:3,info:4};var b=(function(){function b(){}b.h=function(a){this.d=a;};b.l=function(a){this.g=a;};b.o=function(){var h=[];for(var _i=0;_i<arguments.length;_i++){h[_i-0]=arguments[_i];}console.log.apply(console,[chalk.gray("["+this.g+"]")].concat(h));};b.p=function(){var f=[];for(var _i=0;_i<arguments.length;_i++){f[_i-0]=arguments[_i];}if(this.d<a.info){return;}console.log.apply(console,[chalk.gray(("["+this.g+"]")+chalk.blue(" INFO: "))].concat(f));};b.s=function(){var c=[];for(var _i=0;_i<arguments.length;_i++){c[_i-0]=arguments[_i];}if(this.d<a.warn){return;}console.log.apply(console,[("["+this.g+"]")+chalk.yellow(" WARNING: ")].concat(c));};b.w=function(){var c=[];for(var _i=0;_i<arguments.length;_i++){c[_i-0]=arguments[_i];}if(this.d<a.error){return;}console.log.apply(console,[("["+this.g+"]")+chalk.red(" ERROR: ")].concat(c));};b.x=function(){var c=[];for(var _i=0;_i<arguments.length;_i++){c[_i-0]=arguments[_i];}if(this.d<a.error){return;}console.log.apply(console,[("["+this.g+"]")+chalk.gray(" TRACE: ")].concat(c));};b.d=a.none;b.g="logger";return b;})();var TsCore;(function(TsCore){function a(c,e){var f=c.length;var g=e.length;return f>g&&c.substr(f-g,g)===e;}TsCore.a=a;TsCore.d=[".ts",".tsx",".d.ts"];TsCore.f=TsCore.d;function g(b){if(!b){return false;}for(var _i=0;_i<TsCore.d.length;_i++){var c=TsCore.d[_i];if(a(b,c)){return true;}}return false;}TsCore.g=g;function h(a){if(a.kind===222){return a.moduleSpecifier;}if(a.kind===221){var b=a.moduleReference;if(b.kind===232){return b.expression;}}if(a.kind===228){return a.moduleSpecifier;}}TsCore.h=h;function i(a){var c=[];for(var _i=1;_i<arguments.length;_i++){c[_i-1]=arguments[_i];}var d=a.key;if(arguments.length>1){d=j(d,arguments,1);}return {file:undefined,start:undefined,length:undefined,messageText:d,category:a.category,code:a.code};}TsCore.i=i;function j(a,b,c){c=c||0;return a.replace(/{(\d+)}/g,function(a,d){return b[+d+c];});}function l(a){return (a.flags&8192)!==0;}TsCore.l=l;function n(a){return a.kind===221||a.kind===223&&!!a.name||a.kind===224||a.kind===226||a.kind===230||a.kind===227&&a.expression.kind===69;}TsCore.n=n;function t(a){return a.replace(/\\/g,"/");}TsCore.t=t;function u(a){return a.replace(/\.ts/,".js");}TsCore.u=u;})(TsCore||(TsCore={}));var Utils;(function(Utils){function a(d,e){if(d){for(var i=0,f=d.length;i<f;i++){var g=e(d[i],i);if(g){return g;}}}return undefined;}Utils.a=a;function d(a,b){if(a){for(var _i=0;_i<a.length;_i++){var v=a[_i];if(v===b){return true;}}}return false;}Utils.d=d;var f=Object.prototype.hasOwnProperty;function g(d,e){return f.call(d,e);}Utils.g=g;function h(a){var b={};for(var c in a){b[c]=a[c];}return b;}Utils.h=h;function j(a,f){var c;if(a){c=[];for(var _i=0;_i<a.length;_i++){var v=a[_i];c.push(f(v));}}return c;}Utils.j=j;function v(a,c){var d=1;var f={};for(var h in a){f[h]=a[h];}for(var i in c){if(!g(f,i)){f[i]=c[i];}}return f;}Utils.v=v;function w(a,b,c){return a.substr(0,b)+c+a.substr(b+c.length);}Utils.w=w;})(Utils||(Utils={}));var c=(function(){function c(a,b){this.d=a;this.e=b;}c.prototype.h=function(){return this.e;};c.prototype.j=function(){return this.d;};c.prototype.l=function(){return (this.d===ts.ExitStatus.Success);};return c;})();var d=(function(){function d(a){var _this=this;this.a={};this.b={};this.c=0;this.e={};this.h=0;this.i={};this.getSourceFile=this.m;this.fileExists=function(d){d=_this.getCanonicalFileName(d);if(!_this.n(path.dirname(d))){return false;}if(Utils.g(_this.e,d)){return _this.e[d];}_this.h++;return _this.e[d]=_this.k.fileExists(d);};this.j=a;this.k=ts.createCompilerHost(this.j);}d.prototype.l=function(){return this.a;};d.prototype.m=function(a,b,c){return this.k.getSourceFile(a,b,c);};d.prototype.writeFile=function(d,e,f,h){this.a[d]=e;};d.prototype.readFile=function(a){if(Utils.g(this.i,a)){return this.i[a];}return this.i[a]=this.k.readFile(a);};d.prototype.getDefaultLibFileName=function(a){return this.k.getDefaultLibFileName(a);};d.prototype.getCurrentDirectory=function(){return this.k.getCurrentDirectory();};d.prototype.getCanonicalFileName=function(a){return this.k.getCanonicalFileName(a);};d.prototype.useCaseSensitiveFileNames=function(){return this.k.useCaseSensitiveFileNames();};d.prototype.getNewLine=function(){return this.k.getNewLine();};d.prototype.n=function(a){if(Utils.g(this.b,a)){return this.b[a];}this.c++;return this.b[a]=ts.sys.directoryExists(a);};return d;})();var f=(function(_super){__extends(f,_super);function f(a){_super.call(this,{objectMode:true});}f.prototype._read=function(){};return f;})(stream.Readable);var h=(function(){function h(){}h.prototype.a=function(c){b.o(c);};h.prototype.b=function(a,c){b.o(this.g(a+":",25)+chalk.magenta(this.f(c.toString(),10)));};h.prototype.c=function(a,e){this.b(a,""+e);};h.prototype.d=function(f,g){this.b(f,(g/1000).toFixed(2)+"s");};h.prototype.e=function(a,c){this.b(a,c.toFixed(2)+"%");};h.prototype.f=function(s,a){while(s.length<a){s=" "+s;}return s;};h.prototype.g=function(s,a){while(s.length<a){s=s+" ";}return s;};return h;})();var k=(function(_super){__extends(k,_super);function k(a){_super.call(this,a);}return k;})(File);var BundlePackageType;(function(BundlePackageType){BundlePackageType[BundlePackageType["None"]=0]="None";BundlePackageType[BundlePackageType["Library"]=1]="Library";BundlePackageType[BundlePackageType["Component"]=2]="Component";})(BundlePackageType||(BundlePackageType={}));var l=(function(){function l(c,d){this.b=undefined;this.a=c;this.b=d;}l.prototype.c=function(){return this.a;};l.prototype.d=function(){return this.b;};return l;})();var m=(function(){function m(){}m.prototype.a=function(c,d){var f=[];return {bundles:a(),errors:f};function a(){var e=[];var h=c["bundles"];if(h){b.p(h);for(var k in h){b.p("Bundle Id: ",k,h[k]);var n=h[k];var u;var w=[];var x={};u=path.join(d,k);if(Utils.g(n,"files")){if(n["files"] instanceof Array){w=Utils.j(n["files"],function(s){return path.join(d,s);});b.p("bundle files: ",w);}else{f.push(TsCore.i({code:6063,category:ts.DiagnosticCategory.Error,key:"Bundle '{0}' files is not an array."},k));}}else{f.push(TsCore.i({code:6062,category:ts.DiagnosticCategory.Error,key:"Bundle '{0}' requires an array of files."},k));}if(Utils.g(n,"config")){x=n.config;}x.package=z(x);e.push({name:u,fileNames:w,config:x});}}return e;}function z(a){var b=0;var c=undefined;var d={"none":0,"library":1,"component":2};if(Utils.g(a,"package")){var e=a["package"];if(typeof (e)==="string"){if(Utils.g(d,e.toLowerCase())){b=d[e.toLowerCase()];}}}if(Utils.g(a,"packageNamespace")){var f=a["packageNamespace"];if(typeof (f)==="string"){c=f;}}return new l(b,c);}};return m;})();var n=(function(){function n(a,h,j){this.r=0;this.s=0;this.v=0;this.e=a;this.g=h;this.m=j;this.p=this.g.getCompilerOptions();}n.prototype.y=function(f){this.v=this.r=new Date().getTime();b.o("Compiling project files...");var u=ts.getPreEmitDiagnostics(this.g);if(this.p.noEmitOnError&&u.length>0){return new c(ts.ExitStatus.DiagnosticsPresent_OutputsSkipped,u);}this.r=new Date().getTime()-this.r;if(!this.p.noEmit){var w=new Date().getTime();var x=this.g.emit();this.s=new Date().getTime()-w;u=u.concat(x.diagnostics);if(x.emitSkipped){return new c(ts.ExitStatus.DiagnosticsPresent_OutputsSkipped,u);}var z=this.e.l();for(var A in z){var B=z[A];var C=new k({path:A,contents:new Buffer(B)});this.m.push(C);}}this.v=new Date().getTime()-this.v;if(u.length>0){return new c(ts.ExitStatus.DiagnosticsPresent_OutputsGenerated,u);}if(this.p.diagnostics){this.A();}return new c(ts.ExitStatus.Success);};n.prototype.A=function(){var e=new h();e.c("Files",this.g.getSourceFiles().length);e.c("Lines",this.D());e.d("Pre-emit time",this.r);e.d("Emit time",this.s);e.d("Compile time",this.v);};n.prototype.D=function(){var _this=this;var b=0;Utils.a(this.g.getSourceFiles(),function(a){if(!TsCore.l(a)){b+=_this.E(a).length;}});return b;};n.prototype.E=function(a){return a.getLineStarts();};return n;})();var o=(function(_super){__extends(o,_super);function o(a,b){var _this=this;_super.call(this,a);this.getSourceFile=function(a,b,c){if(_this.q){var e_1=_this.q.getSourceFile(a);if(e_1&&e_1.fileWatcher){return e_1;}}var d=_super.prototype.m.call(_this,a,b,c);if(d&&_this.j.watch){d.fileWatcher=chokidar.watch(d.fileName);d.fileWatcher.on("change",function(a,b){return _this.r(d,a,b);});}return d;};this.r=b;}o.prototype.s=function(b){this.q=b;};return o;})(d);var p=(function(){function p(){}p.prototype.b=function(a){var g=new fileGlob.Glob(a);var c=g.minimatch.set ;if(c.length>1)return true;for(var j=0;j<c[0].length;j++){if(typeof c[0][j]!=='string')return true;}return false;};p.prototype.c=function(b,e){if(b.length===0){return [];}var f=this.d(b,function(a){return fileGlob.sync(a,{root:e});});return f;};p.prototype.d=function(f,h){var j=[];_.flatten(f).forEach(function(b){var c;var a;c=_.isString(b)&&b.indexOf("!")===0;if(c){b=b.slice(1);}a=h(b);if(c){return j=_.difference(j,a);}else{return j=_.union(j,a);}});return j;};return p;})();var q=(function(){function q(a,b,c){this.e=a;this.f=b;this.k=c;}q.prototype.m=function(){return this.k;};q.prototype.s=function(){return this.f;};q.prototype.u=function(){return this.e;};q.prototype.v=function(){return (this.e===ts.ExitStatus.Success);};return q;})();var r=(function(){function r(b,c){this.j={};this.a=b;this.e=c;this.f=this.e.getCompilerOptions();}r.prototype.k=function(e){var f=this;var h={};var j={};function d(c){c.forEach(function(c){var i=f.v(c);var k=f.y(i);var l=f.a.getCanonicalFileName(k.fileName);b.p("Import symbol file name: ",l);if(!Utils.g(j,l)){j[l]=true;d(f.m(k));}if(!Utils.g(h,l)){b.p("Adding module import dependencies for file: ",l);h[l]=f.m(k);}});}var l=f.m(e);d(l);var n=f.a.getCanonicalFileName(e.fileName);if(!Utils.g(h,n)){b.p("Adding top level import dependencies for file: ",n);h[n]=l;}return h;};r.prototype.m=function(a){var c=[];var d=this;function g(f){ts.forEachChild(f,function(f){if(f.kind===222||f.kind===221||f.kind===228){b.p("Found import declaration");var i=TsCore.h(f);if(i&&i.kind===9){var j=d.e.getTypeChecker().getSymbolAtLocation(i);if(j){b.p("Adding import symbol: ",j.name,a.fileName);c.push(f);}else{b.s("Module symbol not found");}}}else if(f.kind===218&&f.name.kind===9&&(f.flags&2||TsCore.l(a))){var k=f;b.p("Processing ambient module declaration: ",k.name.text);g(f.body);}});};g(a);return c;};r.prototype.n=function(a){return a.kind===221&&a.moduleReference.kind===232;};r.prototype.o=function(a){return a.moduleReference.expression;};r.prototype.v=function(a){var b=TsCore.h(a);if(b&&b.kind===9){return this.e.getTypeChecker().getSymbolAtLocation(b);}};r.prototype.w=function(a){return a.getSourceFile();};r.prototype.y=function(a){var b=a.getDeclarations()[0];var c=b.kind===248&&!(b.flags&8192);var d=b.getSourceFile();return d;};return r;})();var Ast;(function(Ast){(function(ContainerFlags){ContainerFlags[ContainerFlags["None"]=0]="None";ContainerFlags[ContainerFlags["IsContainer"]=1]="IsContainer";ContainerFlags[ContainerFlags["IsBlockScopedContainer"]=2]="IsBlockScopedContainer";ContainerFlags[ContainerFlags["HasLocals"]=4]="HasLocals";ContainerFlags[ContainerFlags["IsContainerWithLocals"]=5]="IsContainerWithLocals";})(Ast.ContainerFlags||(Ast.ContainerFlags={}));var ContainerFlags=Ast.ContainerFlags;function a(b){if(b){switch(b.kind){case 144:case 173:case 213:case 174:case 143:case 142:case 145:case 146:case 147:case 148:case 149:case 152:case 153:return true;}}return false;}Ast.a=a;function c(a){if(a&&(a.flags&32)){var e=a.valueDeclaration.flags;if(!(e&1)){return true;}}return false;}Ast.c=c;function d(a){if(a&&a.valueDeclaration){if(a.valueDeclaration.flags&256){return true;}}return false;}Ast.d=d;function e(a,b){var c=[];function j(a,e){var f=a.types;if(f){for(var _i=0;_i<f.length;_i++){var k=f[_i];var l=e.getTypeAtLocation(k);var m=l.symbol.valueDeclaration;if(m){var o=m.heritageClauses;if(o){for(var _a=0;_a<o.length;_a++){var p=o[_a];j(p,e);}}}var n=l.getProperties();for(var _b=0;_b<n.length;_b++){var q=n[_b];if(Ast.p(q)){c.push(q);}}}}}var d=a.heritageClauses;if(d){for(var _i=0;_i<d.length;_i++){var e=d[_i];j(e,b);}}return c;}Ast.e=e;function f(a,b){var c=[];var d=a.types;var g=b.getTypeAtLocation(d[0]);var h=g.getSymbol();if(h.valueDeclaration){if(h.valueDeclaration.flags&256){var i=g.getProperties();for(var _i=0;_i<i.length;_i++){var j=i[_i];c.push(j);}}}return c;}Ast.f=f;function h(a){if(!a){return undefined;}var c=a.id;if(c===undefined&&a.valueDeclaration){c=a.valueDeclaration.symbol.id;}return c?c.toString():undefined;}Ast.h=h;function i(c){switch(c.kind){case 186:case 214:case 215:case 217:case 155:case 165:return 1;case 147:case 148:case 149:case 143:case 142:case 213:case 144:case 145:case 146:case 152:case 153:case 173:case 174:case 218:case 248:case 216:return 5;case 244:case 199:case 200:case 201:case 220:return 2;case 192:return a(c.parent)?0:2;}return 0;}Ast.i=i;function k(a){if(a){var b=a.heritageClauses;if(b){for(var _i=0;_i<b.length;_i++){var c=b[_i];if(c.token===106){return c;}}}}return undefined;}Ast.k=k;function l(a){if(a){var b=a.heritageClauses;if(b){for(var _i=0;_i<b.length;_i++){var c=b[_i];if(c.token===83){return c;}}}}return undefined;}Ast.l=l;function m(a){return 70<=a&&a<=134;}Ast.m=m;function n(a){return 15<=a&&a<=68;}Ast.n=n;function o(a){return 2<=a&&a<=7;}Ast.o=o;function p(a){var b=a.valueDeclaration;while(b){if(b.flags&262144){return true;}b=b.parent;}return false;}Ast.p=p;function q(a){if(a&1){console.log("Symbol flag: FunctionScopedVariable");}if(a&2){console.log("Symbol flag: BlockScopedVariable ");}if(a&4){console.log("Symbol flag: Property");}if(a&8){console.log("Symbol flag: EnumMember");}if(a&16){console.log("Symbol flag: Function");}if(a&32){console.log("Symbol flag: Class");}if(a&64){console.log("Symbol flag: Interface");}if(a&128){console.log("Symbol flag: ConstEnum");}if(a&256){console.log("Symbol flag: RegularEnum");}if(a&512){console.log("Symbol flag: ValueModule");}if(a&1024){console.log("Symbol flag: NamespaceModule");}if(a&2048){console.log("Symbol flag: TypeLiteral");}if(a&4096){console.log("Symbol flag: ObjectLiteral");}if(a&8192){console.log("Symbol flag: Method");}if(a&16384){console.log("Symbol flag: Constructor");}if(a&32768){console.log("Symbol flag: GetAccessor");}if(a&65536){console.log("Symbol flag: SetAccessor");}if(a&131072){console.log("Symbol flag: Signature");}if(a&262144){console.log("Symbol flag: TypeParameter");}if(a&524288){console.log("Symbol flag: TypeAlias");}if(a&1048576){console.log("Symbol flag: ExportValue");}if(a&2097152){console.log("Symbol flag: ExportType");}if(a&4194304){console.log("Symbol flag: ExportNamespace");}if(a&8388608){console.log("Symbol flag: Alias");}if(a&16777216){console.log("Symbol flag: Instantiated");}if(a&33554432){console.log("Symbol flag: Merged");}if(a&67108864){console.log("Symbol flag: Transient");}if(a&134217728){console.log("Symbol flag: Prototype");}if(a&268435456){console.log("Symbol flag: SyntheticProperty");}if(a&536870912){console.log("Symbol flag: Optional");}if(a&1073741824){console.log("Symbol flag: ExportStar");}}Ast.q=q;function r(a){if(a&1){console.log("Node flag: Export");}if(a&2){console.log("Node flag: Ambient");}if(a&16){console.log("Node Flag: Public");}if(a&32){console.log("Node Flag: Private");}if(a&128){console.log("Node Flag: Static");}if(a&256){console.log("Node Flag: Abstract");}if(a&512){console.log("Node Flag: Async");}if(a&1024){console.log("Node Flag: Default");}if(a&2048){console.log("Node Flag: MultiLine");}if(a&4096){console.log("Node Flag: Synthetic");}if(a&8192){console.log("Node Flag: DeclarationFile");}if(a&16384){console.log("Node Flag: Let");}if(a&32768){console.log("Node Flag: Const");}if(a&65536){console.log("Node Flag: OctalLiteral");}if(a&131072){console.log("Node Flag: Namespace");}if(a&262144){console.log("Node Flag: ExportContext");}if(a&524288){console.log("Node Flag: ContainsThis");}if(a&2035){console.log("Node Flag: Modifier");}if(a&112){console.log("Node Flag: AccessibilityModifier");}if(a&49152){console.log("Node Flag: BlockScoped");}}Ast.r=r;})(Ast||(Ast={}));var t=(function(){function t(a,c,d){this.k={};this.m=[];this.n=undefined;this.e=a;this.f=c;this.m=[a];this.k[d.l().toString()]=d;}t.prototype.o=function(){return this.f;};t.prototype.q=function(){return this.f.name;};t.prototype.r=function(){var a=this.f.id;if(a===undefined&&this.f.valueDeclaration){a=this.f.valueDeclaration.symbol.id;}return a?a.toString():undefined;};t.prototype.y=function(){return this.k;};t.prototype.z=function(){return this.m;};t.prototype.A=function(a,c){b.x("Adding identifier ref: ",c.l(),this.q());this.m.push(a);if(!Utils.g(this.k,c.l().toString())){this.k[c.l().toString()]=c;}};t.prototype.B=function(){if((this.f.flags&1)>0){var a=this.I();if(a){return true;}}return false;};t.prototype.C=function(){if((this.f.flags&2)>0){var a=this.I();if(a){return ((a.parent.flags&16384)!==0)||((a.parent.flags&32768)!==0);}}return false;};t.prototype.D=function(){if((this.f.flags&1)>0){if(this.f.valueDeclaration.kind===138){return true;}}return false;};t.prototype.E=function(a){if(this.f.flags&16){if(this.f.valueDeclaration.kind===213){var b=this.f.valueDeclaration.flags;if(Ast.p(this.f)){return false;}if(!(b&1)){return true;}if(a){var c=this.f.valueDeclaration;while(c){if(c.flags&131072){var d=c.name.text;if(d!==a){return true;}}c=c.parent;}}}}return false;};t.prototype.F=function(){return Ast.c(this.f);};t.prototype.G=function(){if((this.f.flags&8192)>0){var a=this.f.valueDeclaration.flags;if((a&32)>0){return true;}var b_1=this.f.parent;if(b_1&&Ast.c(b_1)){if(!Ast.d(b_1)){return true;}}}return false;};t.prototype.H=function(){if((this.f.flags&4)>0){var a=this.f.valueDeclaration.flags;if((a&32)>0){return true;}var b_2=this.f.parent;if(b_2&&Ast.c(b_2)){if(!Ast.d(b_2)){return true;}}}return false;};t.prototype.I=function(){switch(this.e.parent.kind){case 211:return this.e.parent;break;case 212:b.s("VariableDeclaratioList in getVariableDeclaration() - returning null");break;case 193:b.s("VariableStatement in getVariableDeclaration() - returning null");break;}return null;};return t;})();var v=(function(){function v(){}v.c=function(){return this.a++;};v.a=1;return v;})();var u=(function(){function u(a,e,f){this.D=[];this.F=undefined;this.H={};this.I={};this.J={};this.K={};this.L=[];this.M=0;this.d=v.c();this.w=e;if(e&2){b.x("Container is BlockScoped");this.m=a;this.E=true;this.B=f.P();}else{b.x("Container is FunctionScoped");this.k=this.m=a;this.E=false;this.B=this;this.G=0;}}u.prototype.l=function(){return this.d;};u.prototype.N=function(a){this.D.push(a);};u.prototype.O=function(){return this.D;};u.prototype.P=function(){return this.B;};u.prototype.Q=function(){if(this.E){return this.B.Q();}return this.G++;};u.prototype.R=function(){return this.E?this.m:this.k;};u.prototype.S=function(){if(this.k){switch(this.k.kind){case 214:return this.k.members;case 217:return this.k.members;default:b.x("Container::getMembers() unprocessed container kind: ",this.k.kind);}}return undefined;};u.prototype.T=function(){if(this.k&&this.w&4){switch(this.k.kind){case 218:return this.k.locals;default:b.s("Container::getLocals() unprocessed container kind: ",this.k.kind);}}return undefined;};u.prototype.U=function(){return this.E;};u.prototype.V=function(){if(this.w&(1|5)){return true;}return false;};u.prototype.W=function(a){if(a.flags&32){this.F=a;}};u.prototype.X=function(){return this.F;};u.prototype.Y=function(a){for(var i=0;i<this.D.length;i++){if(a.l()===this.D[i].l())return true;}return false;};return u;})();var w=(function(){function w(){}w.prototype.walk=function(a){this.visitNode(a);};w.prototype.visitNode=function(a){this.walkChildren(a);};w.prototype.walkChildren=function(a){var _this=this;ts.forEachChild(a,function(a){return _this.visitNode(a);});};return w;})();var x=(function(){function x(){this.a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_0123456789";}x.prototype.b=function(a){var c=["do","if","in","for","int","let","new","try","var"];var d;while(true){d=this.c(a++);if(c.indexOf(d)>0){continue;}else{return d;}}};x.prototype.c=function(b){var d=b;var e=this.a[d%54];d=Math.floor(d/54);while(d>0){e+=this.a[d%64];d=Math.floor(d/64);}return e;};return x;})();var Debug;(function(Debug){function a(c,d){if(!c){d=d||"Assertion failed";if(typeof Error!=="undefined"){throw new Error(d);}throw d;}}Debug.a=a;})(Debug||(Debug={}));var y=(function(_super){__extends(y,_super);function y(a,b,c){_super.call(this);this.U=[];this.V={};this.Y={};this.db=0;this.eb=0;this.r=a;this.v=a.getTypeChecker();this.z=b;this.M=c;this.U=[];this.$=new x();}y.prototype.fb=function(d){this.m=d;return this.hb(d);};y.prototype.gb=function(f){this.bb=new Date().getTime();this._=f.length;var j="";var l=0;var m=false;var n;var s=ts.createScanner(1,false,0,f);while((n=s.scan())!==1){m=false;if(Ast.o(n)){m=true;}if(!m){switch(l){case 87:if(n===69){j+=" ";}break;case 70:case 75:case 94:case 114:if(n!==23){j+=" ";}break;case 80:if(n!==15){j+=" ";}break;}switch(n){case 71:case 73:case 74:case 78:case 79:case 82:case 123:case 89:case 108:case 92:case 129:case 113:case 98:case 101:case 102:case 103:j+=s.getTokenText()+" ";break;case 83:case 90:case 91:j+=" "+s.getTokenText()+" ";break;case 35:case 41:if((l===35)||(l===41)){j+=" ";}j+=s.getTokenText();break;case 36:case 42:if((l===36)||(l===42)){j+=" ";}j+=s.getTokenText();break;default:j+=s.getTokenText();break;}}if(!m){l=n;}}this.ab=j.length;this.bb=new Date().getTime()-this.bb;if(this.z.diagnostics)this.wb();return j;};y.prototype.visitNode=function(a){if(this.vb(a)){b.x(">>> Scanning container for identifiers: ",this.tb().l());_super.prototype.visitNode.call(this,a);b.x("<<< Done. Scanning container for identifiers: ",this.tb().l());this.ub();}else{switch(a.kind){case 69:var c=a;var d=this.v.getSymbolAtLocation(c);if(d){var e=Ast.h(d);if(e===undefined){if(d.flags&67108864){b.x("Ignoring transient symbol: ",d.name);break;}else{e=ts.getSymbolId(d).toString();b.x("Generated symbol id for: ",d.name,e);}}b.x("Identifier found: ",d.name,e);if(Utils.g(this.Y,e)){b.x("Identifier has already been added: ",d.name);var f=this.Y[e];this.Y[e].A(c,this.tb());if(!Utils.g(this.tb().I,e)){this.tb().K[e]=f;}}else{b.x("Adding new identifier symbol.");var i=new t(c,d,this.tb());this.tb().I[e]=i;this.Y[e]=i;var j=d.getName();if(j.length===1){i.n=j;this.tb().K[e]=i;}this.db++;}}else{b.s("Identifier does not have a symbol",c.text);}break;}_super.prototype.visitNode.call(this,a);}};y.prototype.hb=function(a){this.cb=new Date().getTime();this.walk(a);this.ib();this.cb=new Date().getTime()-this.cb;if(this.z.diagnostics)this.xb();return a;};y.prototype.ib=function(){for(var a in this.V){var b=this.V[a];var c=[];var d=[];d=Ast.e(b.R(),this.v);var g=Ast.l(b.R());if(g){c=Ast.f(g,this.v);}var h=d.concat(c);b.L=h;}this.jb(this.Z);};y.prototype.jb=function(c){b.x(">>> shortenContainerIdentifiers(): ",c.l());var d=c.X();if(d){b.x(">>> Processing inherited base class members...");var i=this.V[d.name];if(i){var k=i.S();if(k){this.pb(k,i);}}b.x("<<< Done. Processing inherited base class members");}b.x(">>> Determining container excluded names...");this.qb(c);b.x("<<< Done. Determining container excluded names");var e=c.S();if(e){b.x(">>> Processing container class members...");this.pb(e,c);b.x("<<< Done. Processing inherited base class members");}var f=c.T();if(f){b.x(">>> Processing container locals..");this.ob(f,c);b.x("<<< Done. Processing container locals.");}b.x("Processing container local symbols...");for(var m in c.I){var p=c.I[m];this.kb(p,c);}b.x("Processing container classifiables...");for(var q in c.J){var r=c.J[q];var s=Ast.h(r);var t=this.Y[s];this.kb(t,c);}b.x(">>> Processing container children...");var g=c.O();for(var j=0;j<g.length;j++){this.jb(g[j]);}b.x("<<< Done. Processing container children");b.x("<<< Done. shortenContainerIdentifiers(): ",c.l());};y.prototype.kb=function(c,e){var _this=this;if(this.lb(c)){var f=this.mb(e,c);b.x("Identifier shortened: ",c.q(),f);var h=c.y();for(var i in h){var j=h[i];j.H[f]=true;}Utils.a(c.z(),function(a){_this.nb(a,f);});return;}};y.prototype.lb=function(a){if(a.C()||a.B()||a.F()||a.G()||a.H()||a.E(this.M.package.d())||a.D()){b.x("Identifier CAN be shortened: ",a.q());return true;}b.x("Identifier CANNOT be shortened: ",a.q());return false;};y.prototype.mb=function(c,d){if(!d.n){var e=d.q();if(e.length===1){d.n=e;}else{while(true){var f=this.$.b(c.Q());Debug.a(f.length<=e.length);if(!Utils.g(c.H,f)){d.n=f;break;}else{b.x("Generated name was excluded: ",f,e);}}this.eb++;}}else{b.x("Identifier already has shortened name: ",d.q(),d.n);}b.p("Identifier shortened name: ",d.q(),d.n);return d.n;};y.prototype.nb=function(a,e){a.text=e;e=" "+e+" ";a.end=a.pos+e.length-1;for(var i=0;i<e.length;i++){this.m.text=Utils.w(this.m.text,a.pos+i,e[i]);}};y.prototype.ob=function(a,c){for(var d in a){var e=a[d];var f=Ast.h(e.declarations[0].symbol);if(f){var g=this.Y[f];this.kb(g,c);}else{b.s("Container local does not have a UId");}}};y.prototype.pb=function(a,c){for(var d in a){var e=a[d];var f=e.symbol;if(f){var g=Ast.h(f);if(g){var i=this.Y[g];var j=false;for(var k in c.L){var l=i.o();var m=c.L[k];if(l.name===m.name){j=true;i.n=i.q();break;}}if(!j){this.kb(i,c);}}else{b.s("Container member does not have a UId");}}else{b.s("Container member does not have a symbol.");}}};y.prototype.qb=function(c){b.x(">>> Excluding names for container id: ",c.l());var d=c.X();if(d){b.x(">>> Excluding base class members...");var e=this.V[d.name];if(e){var f=e.S();if(f){for(var g in f){var i=f[g];var j=i.symbol;var k=Ast.h(j);var m=this.Y[k];if(m&&m.n){b.x("Excluding identifier name for: ",m.q(),m.n);c.H[m.n]=true;}}}}b.x("<<< Done. Excluding base class members");}b.x("Excluding container locals...");for(var o in c.I){var p=c.I[o];this.sb(p,c);}b.x("Excluding container classifiables...");for(var r in c.J){var s=c.J[r];var t=Ast.h(s);var v=this.Y[t];Debug.a(v!==undefined,"Container classifiable identifier symbol not found.");this.sb(v,c);}b.x("<<< Done. Excluding names for container id: ",c.l());};y.prototype.rb=function(d){var e=this.z.target;var f={};function c(a){var b=a.O();for(var i=0;i<b.length;i++){var d=b[i];if(d.U()){c(d);}}for(var h in a.K){var j=a.K[h];if((!j.C)||(e===1)){if(!Utils.g(f,j.r())){f[j.r()]=j;}}}}c(d.P());return f;};y.prototype.sb=function(a,c){b.x(">>> Excluding names for identifier: ",a.q());var d=a.y();for(var e in d){var f=d[e];var g=this.rb(f);for(var h in g){var i=g[h];if(i.n){c.H[i.n]=true;b.x("Excluding identifier name: ",i.n);}}}b.x("<<< Done. Excluding names for identifier: ",a.q());};y.prototype.tb=function(){return this.U[this.U.length-1];};y.prototype.ub=function(){return this.U.pop();};y.prototype.vb=function(a){var c=Ast.i(a);if(c&(1|2)){var d=new u(a,c,this.tb());var e=a.symbol;if(e&&(e.flags&32)){var j=Ast.h(e);if(!Utils.g(this.tb().J,j)){this.tb().J[j]=e;}if(!Utils.g(this.V,e.name)){this.V[e.name]=d;}var k=Ast.l(a);if(k){var m=this.v.getSymbolAtLocation(k.types[0].expression);b.x("Extending base class: ",m.name);d.W(m);}}var f=this.tb();if(!f){this.Z=d;}else{f.N(d);}this.U.push(d);return true;}return false;};y.prototype.wb=function(){var a=new h();a.d("Whitespace time",this.bb);a.e("Whitespace reduction",((this._-this.ab)/this._)*100.00);};y.prototype.xb=function(){var a=new h();a.d("Minify time",this.cb);a.c("Total identifiers",this.db);a.c("Identifiers shortened",this.eb);};return y;})(w);var z=(function(){function z(){}z.c=function(d){if(!d){return;}for(var i=0;i<d.length;i++){this.d(d[i]);}};z.d=function(a){if(!a){return;}var c="";if(a.file){var f=ts.getLineAndCharacterOfPosition(a.file,a.start);c+=chalk.gray(a.file.fileName+"("+(f.line+1)+","+(f.character+1)+"): ");}var e;switch(a.category){case ts.DiagnosticCategory.Error:e=chalk.red(ts.DiagnosticCategory[a.category].toLowerCase());break;case ts.DiagnosticCategory.Warning:e=chalk.yellow(ts.DiagnosticCategory[a.category].toLowerCase());break;default:e=chalk.green(ts.DiagnosticCategory[a.category].toLowerCase());}c+=e+" TS"+chalk.white(a.code+'')+": "+chalk.grey(ts.flattenDiagnosticMessageText(a.messageText,"\n"));b.o(c);};return z;})();var A=(function(){function A(f,k,p){this.d=f;this.t(p);this.g=k;}A.prototype.p=function(){this.g.compilerOptions.watch||false;};A.prototype.r=function(){return this.e;};A.prototype.t=function(b){if(this.e){var c=b?b.getSourceFiles():undefined;Utils.a(this.e.getSourceFiles(),function(a){if(!(c&&Utils.d(c,a))){var b=a;if(b.fileWatcher){b.fileWatcher.unwatch(b.fileName);}}});}this.d.s(b);this.e=b;};return A;})();var B=(function(){function B(a,b){this.w=0;this.x=0;this.A=0;this.D=0;this.E="";this.F="";this.G={};this.H={};this.I={};this.f=a;this.u=b;}B.prototype.J=function(A){var _this=this;this.e=A;this.D=new Date().getTime();var K=new r(this.f,this.u);var L=path.dirname(A.name);if(A.config.outDir){L=path.join(L,A.config.outDir);}var M=path.join(L,path.basename(A.name));M=TsCore.t(M);this.E="";this.F="";this.G={};this.H={};this.I={};var N=false;var O={};for(var T in A.fileNames){var U=A.fileNames[T];b.p(">>> Processing bundle file:",U);var V=this.f.getCanonicalFileName(TsCore.t(U));b.p("BundleSourceFileName:",V);var W=this.u.getSourceFile(V);if(!W){var Z=TsCore.i({code:6060,category:ts.DiagnosticCategory.Error,key:"Bundle Source File '{0}' not found."},V);return new q(ts.ExitStatus.DiagnosticsPresent_OutputsSkipped,[Z]);}if(W.languageVariant==1){N=true;}var X=new Date().getTime();var Y=K.k(W);this.w+=new Date().getTime()-X;for(var $ in Y){if(!Utils.g(O,$)){O[$]=Y[$];}}X=new Date().getTime();b.p("Traversing source dependencies for: ",W.fileName);for(var _ in Y){Y[_].forEach(function(a){var f=_this.U(a);if(_this.S(f)){var h=f.getDeclarations()[0];var i=h.getSourceFile();var j=i.fileName;if(!Utils.g(_this.G,j)){_this.Q(i);}}else{if(a.kind===221){var k=a.name.text;var l=_this.K(a);if(_this.L(l,k)){_this.P(a.getText());}}else{_this.M(a);}}});}this.Q(W);this.x+=new Date().getTime()-X;}var P=this.F;if(A.config.package.c()===1){P+="export namespace "+A.config.package.d()+" {\r\n";P+=this.E;P+=" \r\n}";}else{P+=this.E;}var R=N?".tsx":".ts";var S={path:M+R,extension:R,text:P};this.D=new Date().getTime()-this.D;if(this.u.getCompilerOptions().diagnostics){this.V();}return new q(ts.ExitStatus.Success,undefined,S);};B.prototype.K=function(a){if(a.moduleReference.kind===232){var b=a.moduleReference;return b.expression.text;}else{return a.moduleReference.getText();}};B.prototype.L=function(a,b){if(!Utils.g(this.H,a)){this.H[a]={};}var c=this.H[a];if(!Utils.g(c,b)){c[b]=b;return true;}return false;};B.prototype.M=function(b){var _this=this;if(!b.importClause){return;}var c=b.moduleSpecifier.text;var d="import ";var e=false;var f=false;if(b.importClause){if(b.importClause.name&&this.L(c,b.importClause.name.text)){d+=b.importClause.name.text;e=true;}}if(b.importClause.namedBindings){if(b.importClause.namedBindings.kind===224){if(this.L(c,b.importClause.namedBindings.name.text)){if(e){d+=", ";}d+="* as ";d+=b.importClause.namedBindings.name.text;f=true;}}else{if(e){d+=", ";}d+="{ ";Utils.a(b.importClause.namedBindings.elements,function(a){if(_this.L(c,a.name.text)){if(!f){f=true;}else{d+=", ";}var b=a.propertyName;if(b){d+=b.text+" as "+a.name.text;}else{d+=a.name.text;}}});d+=" }";}}d+=" from ";d+=b.moduleSpecifier.getText();d+=";";if(e||f){this.P(d);}};B.prototype.N=function(a){var _this=this;b.p("Processing import statements and export declarations in file: ",a.fileName);var f=a.text;ts.forEachChild(a,function(a){if(a.kind===222||a.kind===221||a.kind===228){b.p("processImportStatements() found import");var g=TsCore.h(a);if(g&&g.kind===9){var i=_this.u.getTypeChecker().getSymbolAtLocation(g);if((i)&&(_this.S(i)||_this.T)){b.p("processImportStatements() removing code module symbol.");f=_this.O(a.pos,a.end,f);}}}else{if(_this.e.config.package.c()===2){if(a.kind===218){var j_1=a;if(j_1.name.getText()!==_this.e.config.package.d()){if(j_1.flags&1){b.p("Component namespace not package namespace. Removing export modifier.");var k=j_1.modifiers[0];f=_this.O(k.pos,k.end,f);}}}else{if(a.flags&1){var l=a.modifiers[0];f=_this.O(l.pos,l.end,f);}}}}});return f;};B.prototype.O=function(a,b,c){var d=b-a;var e="";for(var i=0;i<d;i++){e+=" ";}var f=c.substring(0,a);var g=c.substring(b);return f+e+g;};B.prototype.P=function(a){b.p("Entering emitModuleImportDeclaration()");this.F+=a+"\n";};B.prototype.Q=function(a){b.p("Entering addSourceFile() with: ",a.fileName);if(this.R(a)){var c=this.N(a);this.E+=c+"\n";this.G[a.fileName]=a.fileName;}else{if(!Utils.g(this.I,a.fileName)){b.p("Adding definition file to bundle source context: ",a.fileName);this.I[a.fileName]=a.text;}}};B.prototype.R=function(a){return (a.kind===248&&!(a.flags&8192));};B.prototype.S=function(a){var b=a.getDeclarations()[0];return (b.kind===248&&!(b.flags&8192));};B.prototype.T=function(a){var b=a.getDeclarations()[0];return ((b.kind===218)&&((b.flags&2)>0));};B.prototype.U=function(a){var b=TsCore.h(a);if(b&&b.kind===9){return this.u.getTypeChecker().getSymbolAtLocation(b);}};B.prototype.V=function(){var a=new h();a.d("Deps gen time",this.w);a.d("Deps walk time",this.x);a.d("Source gen time",this.D);};return B;})();var C=(function(){function C(a,b,c){this.A=0;this.D=0;this.E=0;this.F={};this.e=a;this.u=b;this.w=c;this.x=this.u.getCompilerOptions();}C.prototype.G=function(f,I){var _this=this;b.o("Compiling bundle...");this.D=this.E=new Date().getTime();var K;var L;var M;var N=[];Utils.a(this.u.getSourceFiles(),function(a){N.push(a.fileName);});var O={};var P;var Q=I.minify||false;if(Q){var bb_1=path.dirname(f.path);var cb_1=path.basename(f.path,f.extension);K=TsCore.t(path.join(bb_1,cb_1+".min.ts"));}else{K=f.path;}L=f.text;this.F[K]=L;M=ts.createSourceFile(K,f.text,this.x.target);N.push(K);Utils.a(this.u.getSourceFiles(),function(a){_this.F[a.fileName]=a.text;});function l(d,h,i,j){O[d]=h;}function m(d,h,i){if(d===K){return M;}var j=P(d,h,i);return j;}P=this.e.getSourceFile;this.e.getSourceFile=m;this.e.writeFile=l;var R=this.x;R.declaration=I.declaration||this.x.declaration;R.sourceMap=I.sourceMap||this.x.sourceMap;R.noEmit=false;if(Q){R.removeComments=true;}var S=ts.createProgram(N,R,this.e);var T=ts.getPreEmitDiagnostics(S);this.E=new Date().getTime()-this.E;if(this.x.noEmitOnError&&T.length>0){return new c(ts.ExitStatus.DiagnosticsPresent_OutputsSkipped,T);}if(Q){b.o("Minifying bundle...");var db=new y(S,R,I);M=db.fb(M);}this.A=new Date().getTime();var U=S.emit(M);this.A=new Date().getTime()-this.A;b.p("Streaming vinyl bundle source: ",K);var V=new k({path:K,contents:new Buffer(f.text)});this.w.push(V);if(U.emitSkipped){return new c(ts.ExitStatus.DiagnosticsPresent_OutputsSkipped);}var W=T.concat(U.diagnostics);if(this.x.noEmitOnError&&W.length>0){return new c(ts.ExitStatus.DiagnosticsPresent_OutputsGenerated,W);}var X=path.dirname(f.path);var Y=path.basename(f.path,f.extension);var Z=Q?".min":"";var $=TsCore.t(path.join(X,Y+Z+".js"));if(Utils.g(O,$)){var eb=O[$];if(Q){var ib=new y(S,R,I);eb=ib.gb(eb);}b.p("Streaming vinyl js: ",Y);var hb=new k({path:$,contents:new Buffer(eb)});this.w.push(hb);}var _=TsCore.t(path.join(X,Y+Z+".d.ts"));if(Utils.g(O,_)){b.p("Streaming vinyl d.ts: ",_);var jb=new k({path:_,contents:new Buffer(O[_])});this.w.push(jb);}var ab=TsCore.t(path.join(X,Y+Z+".js.map"));if(Utils.g(O,ab)){b.p("Streaming vinyl js.map: ",ab);var kb=new k({path:ab,contents:new Buffer(O[ab])});this.w.push(kb);}this.D=new Date().getTime()-this.D;if(this.x.diagnostics)this.H();if(W.length>0){return new c(ts.ExitStatus.DiagnosticsPresent_OutputsGenerated,W);}else{return new c(ts.ExitStatus.Success);}};C.prototype.H=function(){var a=new h();a.d("Pre-emit time",this.E);a.d("Emit time",this.A);a.d("Compile time",this.D);};return C;})();var D=(function(){function D(a,b){var _this=this;this.F=0;this.H=0;this.I=0;this.K=0;this.U=function(a,b){_this.L=undefined;_this.W();};this.V=function(a,b,c){a.fileWatcher.unwatch(a.fileName);a.fileWatcher=undefined;_this.W();};this.X=function(){_this.N=undefined;var a=_this.S();_this.ab(a);if(_this.L.g.compilerOptions.watch){b.o("Watching for project changes...");}};this.k=a;this.u=b;}D.prototype.O=function(M){var Q=this.T();if(!Q.success){z.c(Q.errors);return ts.ExitStatus.DiagnosticsPresent_OutputsSkipped;}this.L=this.P(Q);b.o("Building Project with: "+chalk.magenta(""+this.E));b.o("TypeScript compiler version: ",ts.version);this.w=M;var R=this.S();this.ab(R);if(Q.compilerOptions.watch){b.o("Watching for project changes...");}else{this.R();}return R;};D.prototype.P=function(a){if(a.compilerOptions.watch){if(!this.Q()){a.compilerOptions.watch=false;}}var b=new o(a.compilerOptions,this.V);return new A(b,a);};D.prototype.Q=function(){var _this=this;if(!ts.sys.watchFile){var a=TsCore.i({code:5001,category:ts.DiagnosticCategory.Warning,key:"The current node host does not support the '{0}' option."},"-watch");z.d(a);return false;}if(!this.M){this.M=chokidar.watch(this.E);this.M.on("change",function(a,b){return _this.U(a,b);});}return true;};D.prototype.R=function(){this.w.push(null);};D.prototype.S=function(){this.F=this.I=new Date().getTime();if(!this.L){var N=this.T();if(!N.success){z.c(N.errors);return ts.ExitStatus.DiagnosticsPresent_OutputsSkipped;}this.L=this.P(N);}var e=[];var f=this.L.g.fileNames;var k=this.L.g.bundles;var p=this.L.g.compilerOptions;var u=ts.createProgram(f,p,this.L.d,this.L.r());this.I=new Date().getTime()-this.I;this.L.t(u);var x=new n(this.L.d,u,this.w);this.H=new Date().getTime();var A=x.y();this.H=new Date().getTime()-this.H;if(!A.l()){z.c(A.h());return A.j();}if(p.listFiles){Utils.a(this.L.r().getSourceFiles(),function(a){b.o(a.fileName);});}this.K=new Date().getTime();var D=new B(this.L.d,this.L.r());var E=new C(this.L.d,this.L.r(),this.w);var M;for(var i=0,O=k.length;i<O;i++){b.o("Building bundle: ",chalk.cyan(k[i].name));M=D.J(k[i]);if(!M.v()){z.c(M.s());return ts.ExitStatus.DiagnosticsPresent_OutputsSkipped;}A=E.G(M.m(),k[i].config);if(!A.l()){z.c(A.h());return A.j();}}this.K=new Date().getTime()-this.K;this.F=new Date().getTime()-this.F;if(p.diagnostics){this.bb();}if(e.length>0){return ts.ExitStatus.DiagnosticsPresent_OutputsGenerated;}return ts.ExitStatus.Success;};D.prototype.T=function(){var _this=this;try{var o=fs.lstatSync(this.k).isDirectory();}catch(e){var q=TsCore.i({code:6064,category:ts.DiagnosticCategory.Error,key:"Cannot read project path '{0}'."},this.k);return {success:false,errors:[q]};}if(o){this.x=this.k;this.E=path.join(this.k,"tsconfig.json");}else{this.x=path.dirname(this.k);this.E=this.k;}b.p("Reading config file:",this.E);var d=ts.readConfigFile(this.E,this.Y);if(d.error){return {success:false,errors:[d.error]};}var f=d.config;b.p("Parsing config file...");var g=ts.parseJsonConfigFileContent(f,ts.sys,this.x);if(g.errors.length>0){return {success:false,errors:g.errors};}g.fileNames=this.$(g.fileNames,this.x);if(this.u.convertFiles===true){this._(g.fileNames,this.x);}var h=new m();var j=h.a(f,this.x);if(j.errors.length>0){return {success:false,errors:j.errors};}j.bundles.forEach(function(a){a.fileNames=_this.$(a.fileNames,_this.x);});var l=this.Z(this.u,this.x);if(l.errors.length>0){return {success:false,errors:l.errors};}var n=Utils.v(l.options,g.options);b.p("Compiler options: ",n);return {success:true,compilerOptions:n,fileNames:g.fileNames,bundles:j.bundles};};D.prototype.W=function(){if(this.N){b(this.N);}this.N=a(this.X,250);};D.prototype.Y=function(a){return ts.sys.readFile(a);};D.prototype.Z=function(a,b){var c=ts.parseJsonConfigFileContent(a,ts.sys,b);if(c.options.project){var d=TsCore.i({code:5099,category:ts.DiagnosticCategory.Error,key:"The compiler option '{0}' is not supported in this context."},"--project");c.errors.push(d);}if(c.options.init){var e=TsCore.i({code:5099,category:ts.DiagnosticCategory.Error,key:"The compiler option '{0}' is not supported in this context."},"--init");c.errors.push(e);}return c;};D.prototype.$=function(d,e){var f=new p();var g=[];Utils.a(d,function(a){if(!f.b(a)){g.push(path.normalize(a));}});var h=f.c(d,e);var i=[];Utils.a(h,function(a){i.push(path.normalize(a));});return _.union(i,g);};D.prototype._=function(a,c){var d="";try{d=fs.readFileSync(this.E,'utf8');if(d!==undefined){var f=JSON.parse(d);var g=[];a.forEach(function(a){g.push(path.relative(c,a).replace(/\\/g,"/"));});f["files"]=g;fs.writeFileSync(this.E,JSON.stringify(f,undefined,4));}}catch(e){b.o(chalk.yellow("Converting project files failed."));}};D.prototype.ab=function(a){switch(a){case ts.ExitStatus.Success:b.o(chalk.green("Project build completed successfully."));break;case ts.ExitStatus.DiagnosticsPresent_OutputsSkipped:b.o(chalk.red("Build completed with errors."));break;case ts.ExitStatus.DiagnosticsPresent_OutputsGenerated:b.o(chalk.red("Build completed with errors. "+chalk.italic("Outputs generated.")));break;}};D.prototype.bb=function(){var b=new h();b.a("Total build times...");b.d("Pre-build time",this.I);b.d("Compiling time",this.H);b.d("Bundling time",this.K);b.d("Build time",this.F);};return D;})();var TsProject;(function(TsProject){function src(a,c){if(a===undefined&&typeof a!=='string'){throw new Error("Provide a valid directory or file path to the Typescript project configuration json file.");}c=c||{};c.logLevel=c.logLevel||0;b.h(c.logLevel);b.l("TsProject");var d=new f();var e=new D(a,c);e.O(d);return d;}TsProject.src=src;})(TsProject=exports.TsProject||(exports.TsProject={}));module.exports=TsProject;